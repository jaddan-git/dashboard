<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>기술지원본부 주간 업무 보고 대시보드 (2025.05.19)</title>
    
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.0.0"></script> 
    <style>
        /* Default font setting (optional) */
        body {
            font-family: 'Inter', sans-serif; /* Inter font or system default */
        }
        /* Chart container style */
        .chart-container {
            position: relative;
            margin: auto;
            height: 300px; /* Default height */
            width: 95%;   /* Adjust width */
            max-width: 600px; /* Max width */
            margin-bottom: 2rem; /* Spacing between charts */
        }
        /* Small chart container */
        .chart-container-small {
            height: 250px;
            max-width: 400px;
        }
         /* Adjust chart size on mobile */
        @media (max-width: 640px) {
            .chart-container {
                height: 250px;
            }
             .chart-container-small {
                height: 200px;
            }
        }
    </style>
</head>
<body class="bg-gray-100 p-4 md:p-8">

    <h1 class="text-2xl md:text-3xl font-bold text-center text-gray-800 mb-8">기술지원본부 주간 업무 보고 대시보드 (2025.05.19 기준)</h1>

    
    
    <section class="mb-12 bg-white p-6 rounded-lg shadow-md">
        <h2 class="text-xl font-semibold text-gray-700 mb-6 text-center">전체 기술지원 현황 요약</h2>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
            
            
            <div>
                <h3 class="text-lg font-medium text-gray-600 mb-3 text-center">제품별 총 접수 건수</h3>
                <div class="chart-container">
                    <canvas id="overallReceivedChart"></canvas>
                </div>
            </div>
            
            
            <div>
                <h3 class="text-lg font-medium text-gray-600 mb-3 text-center">제품별 진행 중 건수 (누적)</h3>
                <div class="chart-container">
                    <canvas id="overallInProgressChart"></canvas>
                </div>
            </div>
        </div>
    </section>

    
    
    <section class="mb-12 bg-white p-6 rounded-lg shadow-md">
        <h2 class="text-xl font-semibold text-gray-700 mb-6 text-center">WebSquare / WebTop 상세 현황</h2>
        <div class="mb-6 px-4">
            <h3 class="text-lg font-medium text-gray-600 mb-2">주요 이슈</h3>
            <ul class="list-disc list-inside text-gray-600 space-y-1">
                <li><span class="font-semibold text-orange-600">[진행중]</span> 신한은행 기업뱅킹: WGear 취약점 보완 적용(5/15) 후 고객 대응 (8건 중 7건 해결/ 1건 미해결)</li>
                <li><span class="font-semibold text-orange-600">[진행중]</span> 삼성전자 DX 전사통합표준화: 웹스퀘어 AI 설치 오류 (VueJS 충돌)</li>
                <li><span class="font-semibold text-orange-600">[진행중]</span> 기술지원 통계: 기술지원 현황 및 가동률 통계 보고서 작성 (5/19 대표이사 보고)</li>
            </ul>
            <h3 class="text-lg font-medium text-gray-600 mt-4 mb-2">신규 라이선스</h3>
            <p class="text-gray-600">총 12 core 신규 발급 (Gsoft GIB 테니스봇)</p>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8 items-start"> 
             
            
            <div class="lg:col-span-2">
                
                <h3 class="text-lg font-medium text-gray-600 mb-3 text-center">채널별 처리 현황</h3>
                <div class="chart-container">
                    <canvas id="wsChannelChart"></canvas>
                </div>
            </div>
            
            
            <div class="grid grid-cols-1 gap-8">
                 
                
                <div>
                    <h3 class="text-lg font-medium text-gray-600 mb-3 text-center">진행 중 상세 (총 10건)</h3>
                    <div class="chart-container chart-container-small">
                        <canvas id="wsInProgressDetailChart"></canvas>
                    </div>
                </div>
                
                
                <div>
                    <h3 class="text-lg font-medium text-gray-600 mb-3 text-center">지원 유형별 현황</h3>
                    <div class="chart-container chart-container-small">
                        <canvas id="wsSupportTypeChart"></canvas>
                    </div>
                </div>
            </div>
        </div>
    </section>

    
    
    <section class="mb-12 bg-white p-6 rounded-lg shadow-md">
        <h2 class="text-xl font-semibold text-gray-700 mb-6 text-center">ProWorks 상세 현황</h2>
         <div class="mb-6 px-4">
            <h3 class="text-lg font-medium text-gray-600 mb-2">주요 이슈</h3>
            <ul class="list-disc list-inside text-gray-600 space-y-1">
                <li><span class="font-semibold text-green-600">[완료]</span> 한국예탁결제원: XDA 유형 INSERT_BATCH 와 INSERT 차이, 권한 없음 원인 파악</li>
                <li><span class="font-semibold text-green-600">[완료]</span> 국민연금공단: 로그인 중복처리 방지 가이드, 세션 타임아웃 값 설정, EOS/EOL</li>
                <li><span class="font-semibold text-orange-600">[진행중]</span> 성결대학교: BPFDoor 악성코드 점검 진행</li>
            </ul>
             <p class="text-gray-600 mt-4">정기 점검: 7 건</p>
        </div>
        <div>
            <h3 class="text-lg font-medium text-gray-600 mb-3 text-center">기술지원 및 설치/패치 현황</h3>
            <div class="chart-container">
                <canvas id="proWorksStatusChart"></canvas>
            </div>
        </div>
    </section>

    
    
    <section class="mb-12 bg-white p-6 rounded-lg shadow-md">
        <h2 class="text-xl font-semibold text-gray-700 mb-6 text-center">Matrix Windows 상세 현황</h2>
         <div class="mb-6 px-4">
            <h3 class="text-lg font-medium text-gray-600 mb-2">주요 이슈</h3>
            <ul class="list-disc list-inside text-gray-600 space-y-1">
                <li><span class="font-semibold text-green-600">[완료]</span> 신한은행/기업뱅킹: 취약점 보완 모듈 적용 완료</li>
                <li><span class="font-semibold text-green-600">[완료]</span> 새마을금고: 자동실행 오류 업무 지원 완료</li>
                <li><span class="font-semibold text-orange-600">[진행중]</span> 새마을금고: 지정맥 인증 장치 연결 오류</li>
                <li><span class="font-semibold text-orange-600">[진행중]</span> 기업은행/글로벌: 폴란드 웹탑 구축</li>
            </ul>
        </div>
        <div>
            <h3 class="text-lg font-medium text-gray-600 mb-3 text-center">기술 문의 및 장애 대응 현황</h3>
             <p class="text-sm text-gray-500 text-center mb-2">(참고: 완료 건수는 이전 주 이월 건 포함 가능)</p>
            <div class="chart-container">
                <canvas id="matrixWindowsStatusChart"></canvas>
            </div>
        </div>
    </section>

    
    
    <section class="bg-white p-6 rounded-lg shadow-md">
        <h2 class="text-xl font-semibold text-gray-700 mb-6 text-center">Matrix Mobile 상세 현황</h2>
         <div class="mb-6 px-4">
            <h3 class="text-lg font-medium text-gray-600 mb-2">주요 이슈</h3>
            <ul class="list-disc list-inside text-gray-600 space-y-1">
                 <li><span class="font-semibold text-green-600">[완료]</span> 신한글로벌 미국: Matrix 버전 차이 요청</li>
                 <li><span class="font-semibold text-orange-600">[진행중]</span> 한국투자저축은행: 인증 팝업 간헐적 프리징</li>
                 <li><span class="font-semibold text-orange-600">[진행중]</span> 조달청 RFID: Cache Clear 방안 요청</li>
            </ul>
        </div>
        <div>
            <h3 class="text-lg font-medium text-gray-600 mb-3 text-center">기술지원 및 설치/패치 현황</h3>
            <div class="chart-container">
                <canvas id="matrixMobileStatusChart"></canvas>
            </div>
        </div>
    </section>

    <script>
        // Register the datalabels plugin globally
        Chart.register(ChartDataLabels);

        // Default plugin configuration
        Chart.defaults.set('plugins.datalabels', {
            color: '#333', // Label text color
            anchor: 'end',
            align: 'top',
            formatter: function(value, context) {
                // Don't show label for 0 values to avoid clutter
                // Also check if the value is defined and not null
                return value !== null && typeof value !== 'undefined' && value > 0 ? value : null; 
            },
            font: {
                weight: 'bold',
                size: 11
            }
        });

        // Common color palette
        const colors = {
            blue: 'rgba(54, 162, 235, 0.8)',
            red: 'rgba(255, 99, 132, 0.8)',
            yellow: 'rgba(255, 206, 86, 0.8)',
            green: 'rgba(75, 192, 192, 0.8)',
            purple: 'rgba(153, 102, 255, 0.8)',
            orange: 'rgba(255, 159, 64, 0.8)',
            grey: 'rgba(201, 203, 207, 0.8)',
            lightBlue: 'rgba(173, 216, 230, 0.8)',
            lightGreen: 'rgba(144, 238, 144, 0.8)'
        };
        const borderColors = Object.values(colors).map(c => c.replace('0.8', '1'));

        // --- Chart Data for 2025.05.19 ---

        // 1. Overall Received Tickets Chart
        const overallReceivedCtx = document.getElementById('overallReceivedChart').getContext('2d');
        const overallReceivedData = [84, 25, 4, 1]; // Updated Data: WS 84, PW 25 (24+1), MW 4, MM 1
        const overallReceivedMaxVal = Math.max(...overallReceivedData);
        new Chart(overallReceivedCtx, {
            type: 'bar',
            data: {
                labels: ['WebSquare/WebTop', 'ProWorks', 'Matrix Windows', 'Matrix Mobile'],
                datasets: [{
                    label: '총 접수 건수',
                    data: overallReceivedData, 
                    backgroundColor: [colors.blue, colors.green, colors.yellow, colors.red],
                    borderColor: borderColors.slice(0, 4),
                    borderWidth: 1
                }]
            },
            options: {
                responsive: true, maintainAspectRatio: false,
                plugins: { legend: { display: false }, datalabels: { anchor: 'end', align: 'top' } },
                scales: { 
                    y: { 
                        beginAtZero: true, 
                        title: { display: true, text: '건수' },
                        suggestedMax: overallReceivedMaxVal + 10 // Add buffer
                    } 
                }
            }
        });

        // 2. Overall In-Progress Tickets Chart
        const overallInProgressCtx = document.getElementById('overallInProgressChart').getContext('2d');
        const overallInProgressData = [10, 3, 7, 1]; // Updated Data: WS 10, PW 3 (3+0), MW 7, MM 1
        const overallInProgressMaxVal = Math.max(...overallInProgressData);
        new Chart(overallInProgressCtx, {
            type: 'bar',
            data: {
                labels: ['WebSquare/WebTop', 'ProWorks', 'Matrix Windows', 'Matrix Mobile'],
                datasets: [{
                    label: '진행 중 건수 (누적)',
                    data: overallInProgressData, 
                    backgroundColor: [colors.blue, colors.green, colors.yellow, colors.red],
                    borderColor: borderColors.slice(0, 4),
                    borderWidth: 1
                }]
            },
            options: {
                 responsive: true, maintainAspectRatio: false,
                plugins: { 
                    legend: { display: false }, 
                    datalabels: { anchor: 'end', align: 'top' } 
                },
                scales: { 
                    y: { 
                        beginAtZero: true, 
                        title: { display: true, text: '건수' },
                        suggestedMax: overallInProgressMaxVal + 3 // Add buffer
                    } 
                }
            }
        });

        // 3. WebSquare Channel Status Chart (Title Updated)
        const wsChannelCtx = document.getElementById('wsChannelChart').getContext('2d');
        new Chart(wsChannelCtx, {
            type: 'bar',
            data: {
                labels: ['엔지니어 개별 문의', '서비스데스크 W-Tech'],
                datasets: [
                    { label: '접수', data: [48, 36], backgroundColor: colors.blue, borderColor: colors.blue.replace('0.8', '1'), borderWidth: 1 }, // Updated
                    { label: '완료', data: [44, 30], backgroundColor: colors.green, borderColor: colors.green.replace('0.8', '1'), borderWidth: 1 }, // Updated
                    { label: '진행중', data: [4, 6], backgroundColor: colors.orange, borderColor: colors.orange.replace('0.8', '1'), borderWidth: 1 } // Updated
                ]
            },
            options: {
                responsive: true, maintainAspectRatio: false,
                scales: { y: { beginAtZero: true, title: { display: true, text: '건수' } } },
                plugins: { legend: { position: 'top' }, datalabels: { anchor: 'end', align: 'top', offset: -1 } }
            }
        });

        // 4. WebSquare In-Progress Detail Chart
        const wsInProgressDetailCtx = document.getElementById('wsInProgressDetailChart').getContext('2d');
        new Chart(wsInProgressDetailCtx, {
            type: 'doughnut',
            data: {
                labels: ['분석', '지라'],
                datasets: [{
                    label: '진행 중 상세',
                    data: [9, 1], // Updated Data (4+5 분석, 0+1 지라)
                    backgroundColor: [colors.lightBlue, colors.orange],
                    hoverOffset: 4
                }]
            },
            options: {
                responsive: true, maintainAspectRatio: false,
                plugins: {
                    legend: { position: 'bottom' },
                    tooltip: { // Tooltip config kept
                        callbacks: {
                            label: function(context) {
                                let label = context.label || ''; if (label) { label += ': '; }
                                if (context.parsed !== null) {
                                   const total = context.chart.data.datasets[0].data.reduce((a, b) => a + b, 0);
                                   const percentage = total > 0 ? Math.round((context.parsed / total) * 100) : 0; // Avoid division by zero
                                   label += context.parsed + '건 (' + percentage + '%)';
                                } return label;
                            }
                        }
                    },
                    datalabels: { // Datalabels config kept
                        formatter: (value, ctx) => {
                            let sum = ctx.chart.data.datasets[0].data.reduce((a, b) => a + b, 0);
                            let percentage = sum > 0 ? (value*100 / sum).toFixed(1) + "%" : "0.0%"; // Avoid division by zero
                            const numericValue = Number(value); 
                            return !isNaN(numericValue) && numericValue > 0 ? `${numericValue}건\n(${percentage})` : null;
                        },
                        color: '#fff', align: 'center', anchor: 'center', font: { size: 10 }
                    }
                }
            }
        });

        // 5. WebSquare Support Type Chart
        const wsSupportTypeCtx = document.getElementById('wsSupportTypeChart').getContext('2d');
        const wsSupportTypeData = [8, 1, 42, 2]; // Updated Data
        const wsSupportTypeMaxVal = Math.max(...wsSupportTypeData);
        new Chart(wsSupportTypeCtx, {
            type: 'bar',
            data: {
                labels: ['설치', '패치', '정기점검', '장애'],
                datasets: [{
                    label: '지원 건수',
                    data: wsSupportTypeData, 
                    backgroundColor: [colors.purple, colors.lightBlue, colors.green, colors.red],
                    borderColor: [colors.purple, colors.lightBlue, colors.green, colors.red].map(c => c.replace('0.8', '1')),
                    borderWidth: 1
                }]
            },
            options: {
                 responsive: true, maintainAspectRatio: false,
                 plugins: { legend: { display: false }, datalabels: { anchor: 'end', align: 'top' } },
                 scales: { 
                    y: { 
                        beginAtZero: true, 
                        title: { display: true, text: '건수' },
                        suggestedMax: wsSupportTypeMaxVal + 5 // Add buffer
                    } 
                 }
            }
        });

        // 6. ProWorks Status Chart
        const proWorksStatusCtx = document.getElementById('proWorksStatusChart').getContext('2d');
        new Chart(proWorksStatusCtx, {
            type: 'bar',
            data: {
                labels: ['기술 문의/장애', '설치/패치'],
                datasets: [
                    { label: '접수', data: [24, 1], backgroundColor: colors.blue, borderColor: colors.blue.replace('0.8', '1'), borderWidth: 1 }, // Updated
                    { label: '완료', data: [22, 1], backgroundColor: colors.green, borderColor: colors.green.replace('0.8', '1'), borderWidth: 1 }, // Updated
                    { label: '진행중 (누적)', data: [3, 0], backgroundColor: colors.orange, borderColor: colors.orange.replace('0.8', '1'), borderWidth: 1 } // Updated
                ]
            },
            options: {
                responsive: true, maintainAspectRatio: false,
                scales: { y: { beginAtZero: true, title: { display: true, text: '건수' } } },
                plugins: { legend: { position: 'top' }, datalabels: { anchor: 'end', align: 'top', offset: -1 } }
            }
        });

        // 7. Matrix Windows Status Chart
        const matrixWindowsStatusCtx = document.getElementById('matrixWindowsStatusChart').getContext('2d');
        const matrixWindowsData = [4, 5, 7]; // Updated Data: 접수 4, 완료 5, 진행중 7
        const matrixWindowsMaxVal = Math.max(...matrixWindowsData);
        new Chart(matrixWindowsStatusCtx, {
            type: 'bar',
            data: {
                labels: ['기술 문의 및 장애 대응'],
                datasets: [
                    { label: '접수', data: [matrixWindowsData[0]], backgroundColor: colors.blue, borderColor: colors.blue.replace('0.8', '1'), borderWidth: 1 }, 
                    { label: '완료', data: [matrixWindowsData[1]], backgroundColor: colors.green, borderColor: colors.green.replace('0.8', '1'), borderWidth: 1 }, 
                    { label: '진행중 (누적)', data: [matrixWindowsData[2]], backgroundColor: colors.orange, borderColor: colors.orange.replace('0.8', '1'), borderWidth: 1 } 
                ]
            },
             options: {
                responsive: true, maintainAspectRatio: false,
                scales: { 
                    y: { 
                        beginAtZero: true, 
                        title: { display: true, text: '건수' },
                        suggestedMax: matrixWindowsMaxVal + 3 // Add buffer
                    }, 
                    x: {} 
                },
                plugins: { legend: { position: 'top' }, datalabels: { offset: 0, align: 'top' } }
            }
        });

         // 8. Matrix Mobile Status Chart
        const matrixMobileStatusCtx = document.getElementById('matrixMobileStatusChart').getContext('2d');
        const matrixMobileData = [1, 1, 1]; // Updated Data: 접수 1, 완료 1, 진행중 1 (설치/패치는 0)
        const matrixMobileMaxVal = Math.max(...matrixMobileData);
        new Chart(matrixMobileStatusCtx, {
            type: 'bar',
            data: {
                labels: ['기술 문의/장애', '설치/패치'],
                 datasets: [
                    { label: '접수', data: [1, 0], backgroundColor: colors.blue, borderColor: colors.blue.replace('0.8', '1'), borderWidth: 1 }, 
                    { label: '완료', data: [1, 0], backgroundColor: colors.green, borderColor: colors.green.replace('0.8', '1'), borderWidth: 1 }, 
                    { label: '진행중 (누적)', data: [1, 0], backgroundColor: colors.orange, borderColor: colors.orange.replace('0.8', '1'), borderWidth: 1 } 
                ]
            },
            options: {
                responsive: true, maintainAspectRatio: false,
                scales: { 
                    y: { 
                        beginAtZero: true, 
                        title: { display: true, text: '건수' },
                        suggestedMax: matrixMobileMaxVal + 3 // Add buffer
                    } 
                },
                plugins: { legend: { position: 'top' }, datalabels: { anchor: 'end', align: 'top' } }
            }
        });

    </script>

</body>
</html>
